<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title th:text="${task.originalVideoFilename} + ' 详情'">视频详情</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" th:href="@{/static/css/global.css}"> <!-- Your global styles -->
    <style>
        video {
            max-height: 600px; /* Keep specific video max height if desired */
            background: #000;
            border-radius: 0.25rem; /* Bootstrap's default border radius */
        }
    </style>
</head>
<body>
<div th:replace="~{fragments/navbar :: navbar}"></div>

<div class="container mt-4">
    <h1 th:text="${task.originalVideoFilename}" class="mb-4">示例视频.mp4</h1>

    <!-- 视频播放区域 -->
    <div class="mb-4">
        <video controls class="w-100">
            <source th:src="@{'/static/' + ${#strings.replace(#strings.replace(task.subtitledVideoFilePath, '\', '/'), 'outputs/', '')}}"
                    type="video/mp4">
            您的浏览器不支持HTML5视频播放
        </video>
    </div>

    <!-- 视频总结 -->
    <div class="card mb-4">
        <div class="card-header">
            <h3>视频总结</h3>
        </div>
        <div class="card-body">
            <p th:text="${task.summary ?: '无总结信息'}" class="card-text">这是一段关于自然景观的视频，展示了山川河流的美丽景色。</p>
        </div>
    </div>

    <!-- 翻译后字幕 -->
    <div class="card mb-4">
        <div class="card-header">
            <h3>翻译后字幕</h3>
        </div>
        <div class="card-body">
            <pre th:text="${#strings.isEmpty(task.translatedSrtContent) ? '无字幕文件' : task.translatedSrtContent}" class="bg-light p-3 rounded" style="white-space: pre-wrap;">
00:00:00,000 --> 00:00:05,000
这是第一条字幕内容

00:00:05,000 --> 00:00:10,000
这是第二条字幕内容
            </pre>
        </div>
    </div>

    <!-- 下载按钮 -->
    <div class="mt-4 d-flex gap-2">
        <a th:href="'/download-video/' + ${task.id}" class="btn btn-success"><i class="fas fa-download"></i> 下载视频</a>
        <a th:href="'/download-srt/' + ${task.id}" class="btn btn-success"><i class="fas fa-file-alt"></i> 下载字幕</a>
    </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.7/dist/umd/popper.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.min.js"></script>
</body>
</html>